$.fn.dataTable.pipeline=function(opts){var conf=$.extend({pages:5,url:"",data:null,method:"POST"},opts),cacheLower=-1,cacheUpper=null,cacheLastRequest=null,cacheLastJson=null;return function(request,drawCallback,settings){var ajax=!1,requestStart=request.start,drawStart=request.start,requestLength=request.length,requestEnd=requestStart+requestLength;if(settings.clearCache?(ajax=!0,settings.clearCache=!1):cacheLower<0||requestStart<cacheLower||requestEnd>cacheUpper?ajax=!0:JSON.stringify(request.order)===JSON.stringify(cacheLastRequest.order)&&JSON.stringify(request.columns)===JSON.stringify(cacheLastRequest.columns)&&JSON.stringify(request.search)===JSON.stringify(cacheLastRequest.search)||(ajax=!0),cacheLastRequest=$.extend(!0,{},request),ajax){if(requestStart<cacheLower&&(requestStart-=requestLength*(conf.pages-1))<0&&(requestStart=0),cacheLower=requestStart,cacheUpper=requestStart+requestLength*conf.pages,request.start=requestStart,request.length=requestLength*conf.pages,"function"==typeof conf.data){var d=conf.data(request);d&&$.extend(request,d)}else $.isPlainObject(conf.data)&&$.extend(request,conf.data);return $.ajax({type:conf.method,url:conf.url,data:request,dataType:"json",cache:!1,success:function(json){cacheLastJson=$.extend(!0,{},json),cacheLower!=drawStart&&json.aaData.splice(0,drawStart-cacheLower),requestLength>=-1&&json.aaData.splice(requestLength,json.aaData.length),drawCallback(json)}})}json=$.extend(!0,{},cacheLastJson),json.draw=request.draw,json.aaData.splice(0,requestStart-cacheLower),json.aaData.splice(requestLength,json.aaData.length),drawCallback(json)}},$.fn.dataTable.Api.register("clearPipeline()",(function(){return this.iterator("table",(function(settings){settings.clearCache=!0}))}));